@mixin dark {
  --nav-list-bg-override: theme('colors.white');
}

.navigation--lg {
  :where(.menu__link, button.menu__toggle) {
    @apply h-16 inline-flex items-center border-transparent border-b-4 px-1 pt-1 text-sm font-medium text-neutral-500 hover:border-neutral-300 hover:text-neutral-700 dark:hover:text-neutral-400;
  }

  .menu__item {
    @apply relative;
  }

  .menu__item--active-trail.menu__item--has-children .menu__toggle,
  .menu__item--active-trail:not(.menu__item--parent) > .menu__link {
    @apply border-neutral-400 text-neutral-900 dark:text-white font-bold;
  }

  .menu__item--active-trail.menu__item--has-children .menu__toggle,
  .menu__item--parent > .menu__link {
    @apply text-neutral-900 dark:text-white font-semibold;
  }

  .navigation__list {
    --menu-item-gap: 0;

    @apply divide-y lg:divide-none;
    @apply absolute lg:static top-12 left-0 bg-[var(--nav-list-bg-override)] bg-white dark:bg-black lg:bg-transparent hidden @lg/navigation:flex @lg/navigation:justify-end @lg/navigation:[--menu-item-gap:theme(space.8)] w-full;
  }

  .navigation__toggle {
    @apply @lg/navigation:hidden w-12 h-12 flex place-items-center leading-none;

    .material-symbols-sharp {
      @apply w-full;
    }
  }

  .menu__item--has-children {
    @apply flex flex-wrap lg:block;
  }

  .menu__toggle {
    @apply order-1 flex-1;
  }

  button.menu__toggle {
    @apply order-2 flex-none;
  }

  .navigation__sub-menu {
    @apply hidden order-3 w-full lg:w-auto lg:absolute bg-white dark:bg-neutral-900 shadow divide-y dark:divide-neutral-700;

    .menu__link {
      @apply min-w-[19ch] px-4;

      text-wrap: balance;
    }
  }

  &:where([data-behavior='hover']) {
    @media (hover: hover) {
      .menu__item:hover > .navigation__sub-menu {
        @apply block;
      }
    }

    .navigation__list .menu__item--level-2 > .navigation__sub-menu {
      @apply hidden;
    }

    .navigation__list .menu__item--level-2 a.menu__toggle-link {
      @apply inline-flex;
    }

    .menu__item--level-2 button.menu__toggle {
      @apply ml-4 hidden;
    }

    .menu__toggle.is-open ~ .navigation__sub-menu {
      @apply block xl:hidden;

      button.menu__toggle {
        @apply ml-4;
      }
    }
  }

  &:where([data-behavior='toggle']) {
    .menu__toggle.is-open ~ .navigation__sub-menu {
      @apply block;
    }

    .menu__item--level-2 button.menu__toggle {
      @apply hidden;
    }

    .menu__item--level-2 .menu__link.menu__toggle-link {
      @apply xl:inline-flex;
    }
  }
}

/**
 * @file
 * BEM block for Media.
 *
 * Extend Drupal media component
 */
.media--view-mode-embedded,
.media--view-mode-embedded-half-column {
  margin: $spacing-half 0;
  @include respond-to(desktop-and-up) {
    margin: $spacing-base 0;
  }
}

  /* Remove external link icon from custom linked view modes */
  // .view-mode-wysiwyg_linked,
  // .view-mode-wysiwyg_half_column_linked {
  //   > a[href^="http://"],
  //   > a[href^="https://"],
  //   > a[rel*='external'] {
  //     &:after {
  //       content: '';
  //     }
  //   }
  // }
  /* Custom half column images are floated right by default (Tablet and up) */
.media--view-mode-embedded-half-column {
  @extend %has-offset-right;
  margin: em(4) 0 $spacing-base 0;
  @include respond-to(tablet-and-up) {
    width: 50%;
    height: auto;
    float: right;
    margin: em(8) 0 $spacing-prose-base $spacing-prose-double;
  }
  @include respond-to(wide-and-up) {
    width: auto;
  }
  img {
    width: 100%;
    @include respond-to(tablet-and-up) {
      width: auto!important; // Override inline style set by IMCE
      height: auto!important; // Override inline style set by IMCE
    }
  }
}

$icon-offset: 56px;

.media--has-background-icon {
  padding-left: $icon-offset;

  .file {
    position: relative;
    &:before {
      content: '';
      position: absolute;
      top: 0;
      left: -($icon-offset);
      background-image: url(../images/sprite--file-type-icons.png);
      background-position: 0 -53px;
      background-repeat: no-repeat;
      height: 53px;
      width: 38px;
      background-size: 38px 636px;
    }

    /* Maps classes generated by core (web/core/modules/file/file.module) to png file icons sprite */

    // Acrobat types.
    &.file--application-pdf {&:before {background-position: 0 -106px;}}

    // Word document types.
    &.file--x-office-document {&:before {background-position: 0 -212px;}}

    // Spreadsheet document types.
    &.file--x-office-spreadsheet {&:before {background-position: 0 -159px;}}

    // Presentation document types.
    &.file--x-office-presentation {&:before {background-position: 0 -318px;}}

    // Compressed archive types.
    &.file--package-x-generic {&:before {background-position: 0 0;}}

    &.file--text-html {&:before {background-position: 0 -583px;}}
  }


  &.media--view-mode-embedded {
    min-height: 98px;
    padding-left: 78px;
    padding-right: $spacing-base;
    padding-bottom: $spacing-half;
    @include respond-to(tablet-and-up) {
      min-height: 104px;
    }
    .file {
      &:before {
        top: 7px;
      }
    }
    .media__content {
      > a {
        font-weight: 600;
        font-size: $font-size-h5;
        @include respond-to(tablet-and-up) {
          font-size: $font-size-h4;
        }
      }
    }
    .field-name-field-credit-or-caption {
      margin: 5px 0 8px 0;
    }
  }

  &.media--view-mode-short-teaser {
    padding-left: 0;
    .file {
      padding-left: 23px;
      min-height: 33px;
      line-height: normal;
      &:before {
        top: 3px;
        left: 0;
        background-image: url(../images/sprite--file-type-icons-small.png);
        background-position: 0 -18px;
        height: 18px;
        width: 13px;
        background-size: inherit;
      }

      // Acrobat types.
      &.file--application-pdf {&:before {background-position: 0 -36px;}}

      // Word document types.
      &.file--x-office-document {&:before {background-position: 0 -72px;}}

      // Spreadsheet document types.
      &.file--x-office-spreadsheet {&:before {background-position: 0 -54px;}}

      // Presentation document types.
      &.file--x-office-presentation {&:before {background-position: 0 -108px;}}

      // Compressed archive types
      &.file--package-x-generic {&:before {background-position: 0 0;}}

      &.file--text-html {&:before {background-position: 0 -198px;}}
    }
    .media__meta {
      font-size: 14px;
    }
  }
}

.media__content {
  display: block;
  @include respond-to(tablet-and-up) {
    display: inline-block;
  }
  a {
    font-weight: 700;
    overflow-wrap: break-word;
    word-wrap: break-word;
    @include font-smoothing;
    &:focus {
      outline-offset: 0;
    }
  }
}

.media__meta {
  position: relative;
  display: inline-block;
  font-size: 16px;
  text-transform: uppercase;
  color: $gray-light;
  margin-left: 6px;
  @include respond-to(tablet-and-up) {
    margin-left: 0;
  }
  .media--view-mode-embedded & {
     margin-top: 9px;
  }
  &:before {
    content:'(';
    position: absolute;
    top: -1px;
    left: -6px;
  }
  &:after {
    content:')';
    position: absolute;
    top: -1px;
    right: -6px;
  }
  .field {
    position: relative;
    margin-right: 5px;
    &:after {
      content:',';
      position: absolute;
      top: 0;
      right: -5px;
    }
    &:last-child {
      margin-right: 0;
      &:after {
        content:'';
      }
    }
  }
}

.media--type-image {
  &.media--view-mode-full {
    @include respond-to(tablet-and-up) {
      margin-top: $spacing-base;
    }
    > img {
      max-width: 100%;
      height: auto;
    }
  }
}

.media--type-video,
.media--type-audio {
  &.media--view-mode-full {
    margin-top: $spacing-base;
  }
  // &.view-mode-wysiwyg {
  //   padding-left: $spacing-half;
  //   padding-right: $spacing-half;
  //   padding-bottom: $spacing-half;
  //   @include respond-to(tablet-and-up) {
  //     padding-left: $spacing-base;
  //     padding-right: $spacing-base;
  //   }
  // }
}

.media--type-audio {
  .responsive-ratio {
    @include respond-to(mobile) {
      padding-bottom: aspect-ratio-height(16, 6);
    }
  }
}

.media--type-document {
  &.media--view-mode-full {
    > .meta {
      margin-left: -($icon-offset);
    }
    > .field--name-field-description {
      clear: both;
      margin-left: -56px;
      margin-top: $spacing-base;
    }
  }
  // &.view-mode-wysiwyg {
  //   > .file {
  //     > img,
  //     > .file-size {
  //       display: none!important;
  //     }
  //   }
  // }
}


